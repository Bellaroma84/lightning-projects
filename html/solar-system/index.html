<html>
    <head>
        <title>Solar System</title>
        <style>
            * {
                font-family: monospace;
            }
            .center {
                text-align: center;
            }
            .planet {
                border-radius: 50%;
                width: 100px;
                height: 100px;
                background-color: red;
            }
        </style>
    </head>
    <body onload="init()">
        <div class="center">
            <h1>Solar System</h1>
        </div>
        <div class="center">
            <svg id="solar-system" width="1100" height="1100" style="border: 1px solid black;">
                <g id="sun" transform="translate(500, 500)">
                    <circle r="50" fill="#fcca03" />
                    <rect x="0" y="70" width="7" height="20" fill="black"/>
                </g>
                <g id="mercury" transform="translate(500, 600)">
                    <circle r="10.09" fill="silver" />
                </g>
                <g id="venus" transform="translate(500, 654)">
                    <circle r="16.5" fill="silver" />
                </g>
                <g id="earth" transform="translate(500, 682.8)">
                    <circle r="16.9" fill="silver" />
                </g>
                <g id="mars" transform="translate(500, 718.8)">
                    <circle r="12.4" fill="silver" />
                </g>
                <g id="pluto" transform="translate(500, 1000)">
                    <circle r="5.0" fill="brown" />
                </g>
            </svg>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.0/anime.min.js"></script>
        <script>
            function init() {
                const planets = getPlanets();

                const diamParams = getDiamScalingParams();
                const distParams = getDistScalingParams();

                console.log(diamParams);
                console.log(distParams);

                planets.forEach(p => {
                    p.normDiam = rescale(Math.log(p.diameter), diamParams.a, diamParams.b, diamParams.min, diamParams.max);
                    p.normDist = rescale(Math.log(p.distance), distParams.a, distParams.b, distParams.min, distParams.max);
                });
                console.table(planets);

                const diams = planets.map(p => Math.log(p.diameter));
                diams.push(Math.log(1391982.78));
                let _min = Math.min(...diams);
                let _max = Math.max(...diams);
                console.log(`diameters, ${_min}, ${_max}`);
                diams.forEach(d => {
                    const v = rescale(d, 5, 50, _min, _max);
                    console.log(`${d} => ${v}`);
                });

                // const dists = planets.map(p => Math.log(p.distance));
                // _min = Math.min(...dists);
                // _max = Math.max(...dists);
                // console.log('distances');
                // dists.forEach(d => {
                //     const v = rescale(d, 100, 500, _min, _max);
                //     console.log(v);
                // })
            }

            function getDiamScalingParams() {
                const planets = getPlanets();

                const diams = planets.map(p => Math.log(p.diameter));
                diams.push(Math.log(1391982.78));

                let min = Math.min(...diams);
                let max = Math.max(...diams);
                return {a: 5, b: 50, min: min, max: max};
            }

            function getDistScalingParams() {
                const planets = getPlanets();

                const dists = planets.map(p => Math.log(p.distance));
                const min = Math.min(...dists);
                const max = Math.max(...dists);
                return {a: 100, b: 500, min: min, max: max};
            }

            function rescale(x, a, b, min, max) {
                return (b - a) * (x - min) / (max - min) + a;
            }

            function getPlanets() {
                const sunDiameter = 1391982.78;
                const planets = [
                    getPlanet('mercury', 4879.0, 57.9, 1407.6, 88.0, 'silver'),
                    getPlanet('venus', 12104.0, 108.2, -5832.5, 224.7, 'green'),
                    getPlanet('earth', 12756.0, 149.6, 23.9, 365.2, 'blue'),
                    getPlanet('mars', 6792.0, 227.9, 24.6, 687.0, 'red'),
                    getPlanet('jupiter', 142984.0, 778.6, 9.9, 4331.0, 'lightbrown'),
                    getPlanet('saturn', 120536.0, 1433.5, 10.7, 10747.0, 'lightyellow'),
                    getPlanet('uranus', 51118.0, 2872.5, -17.2, 30589.0, 'lightblue'),
                    getPlanet('neptune', 49528.0, 4495.1, 16.1, 59800.0, 'blue'),
                    getPlanet('pluto', 2370.0, 5906.4, -153.3, 90560.0, 'brown'),
                ];

                return planets;
            }

            function getPlanet(name, diameter, distance, rotationPeriod, orbitalPeriod, color) {
                return {
                    'name': name,
                    'diameter': diameter,
                    'distance': distance,
                    'rotationPeriod': rotationPeriod,
                    'orbitalPeriod': orbitalPeriod,
                    'color': color
                };
            }
        </script>
    </body>
</html>